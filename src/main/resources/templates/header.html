<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="/css/base.css">
    <link rel="stylesheet" type="text/css" href="/js/bootstrap/bootstrap-v4.3.1.min.css">
    <link rel="stylesheet" type="text/css" href="/css/base.css">
    <link rel="stylesheet" type="text/css" href="/css/issue.css">
    <link rel="stylesheet" type="text/css" href="/css/reservation.css">
    <link rel="stylesheet" type="text/css" href="/js/bootstrap/datepicker/bootstrap-datetimepicker.min.css">
</head>
<body>



<div id="header" class="navbar navbar-expand-lg navbar-light bg-light" th:fragment="header">
    <h3 class="navbar-brand">诊断辅导预约系统</h3>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <a class="nav-link" id="goto-home" href="javascript:;">主页 </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="goto-issue" href="javascript:;">发布课程</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="goto-reservation" href="javascript:;">预约课程</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="goto-evaluate" href="javascript:;">评价系统</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="goto-history" href="javascript:;">历史信息</a>
            </li>
        </ul>
        <div class="form-inline my-2 my-lg-0">
            <ul class="navbar-nav top-user">
                <li class="dropdown  nav-item">
                    <a id="userDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-user userName">用户</span>
                        <span class="caret"></span>
                    </a>
                    <div class="dropdown-menu" aria-labelledby="userDropdown">
                        <a class="dropdown-item" href="javascript:;">个人信息</a>
                        <a class="dropdown-item" href="javascript:;">。。。</a>
                        <a class="dropdown-item" id="loginOut" href="javascript:;">退出</a>
                    </div>
                </li>
                <li class="nav-item"><a href="javascript:;">帮助</a></li>
                <li class="nav-item"><a herf="#about">关于我们</a></li>
            </ul>
        </div>
    </div>
    <script src="/js/jquery-3.1.1.min.js"></script>
    <script src="/js/app.js"></script>

    <script>
        var header = (function () {
            var bindEvents = function () {
                App.getUserMsg(function (uNbr, uName, type) {
                    header.el('.userName').html(uName + "(" + type + ")");
                    header.el('#userDropdown').data("uNbr", uNbr);
                    header.el('#userDropdown').data("uName", uName);
                });
                header.el("#goto-issue").off('click').on('click', function () {
                    App.goIssueByNewPage();
                });
                header.el("#goto-reservation").off('click').on('click', function () {
                    App.goReservationByNewPage();
                });
                header.el("#goto-evaluate").off('click').on('click', function () {
                    App.goEvaluateByNewPage();
                });
                header.el("#goto-history").off('click').on('click', function () {
                    App.goHistoryByNewPage();
                });
                header.el("#loginOut").off('click').on('click', function () {
                    var uName = home.el('#userDropdown').data('uName');
                    var uNbr = home.el('#userDropdown').data('uNbr');
                    App.loginOut(uNbr, uName);
                });
            };
            return {
                data: {
                    "uNbr": '',
                    "uName": ''
                },
                el: function (expr) {
                    $('#header' + ' ' + (expr ? expr : ''));
                },
                init: function () {
                    bindEvents();
                    return this
                },
            }
        })();
        $(function () {
            header.init();
        })
    </script>
</div>


</body>
</html>