<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/js/bootstrap/bootstrap-v4.3.1.min.css">
    <!-- <link rel="stylesheet" href="/css/base.css"> -->
    <link rel="stylesheet" href="/css/admin.css">
</head>

<body>
<nav class="navbar navbar-light" style="background-color: #3498db;">
    <a class="navbar-brand" href="#">诊辅系统-后台管理</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <!-- <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Features</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Pricing</a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
        </li>
      </ul>
    </div> -->
</nav>
<div class="container" id="top-show-box">
    <div class=" border jumbotron show-box row " id="number-show-box">
        <div class="col-md-7">

            <div class="title">
                <h2>今日课程发布情况</h2>
            </div>
            <hr class="my-4">
            <div class="content">
                <div class="ibox  border shadow" style="background-color: #00a8ff;">
                    <div class="ibox-title border-bottom">
                        <!-- <span class="label label-success pull-right">Monthly</span> -->
                        <h5>语文</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins"><span class="classNumber">12</span></h1>
                        <!-- <div>约占<span class="">98%</span></div> -->
                        <!-- <small>Total income</small> -->
                    </div>
                </div>
                <div class="ibox  border shadow" style="background-color: #4cd137;">
                    <div class="ibox-title border-bottom">
                        <h5>数学</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins"><span class="classNumber">12</span></h1>
                    </div>
                </div>
                <div class="ibox  border shadow" style="background-color: #ff6b81;">
                    <div class="ibox-title border-bottom">
                        <h5>英语</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins"><span class="classNumber">12</span></h1>
                    </div>
                </div>
                <div class="ibox  border shadow" style="background-color: #57606f;">
                    <div class="ibox-title border-bottom">
                        <h5>物理</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins"><span class="classNumber">12</span></h1>
                    </div>
                </div>
                <div class="ibox  border shadow" style="background-color: #5352ed;">
                    <div class="ibox-title border-bottom">
                        <h5>化学</h5>
                    </div>
                    <div class="ibox-content">
                        <h1 class="no-margins"><span class="classNumber">12</span></h1>
                    </div>
                </div>


            </div>
        </div>
        <div class="col-md-5">
            <div id="show-pie-chart"
                 style="height: 330px;width: 100%;  text-align: center;"></div>
        </div>

    </div>

</div>
<div class="container border jumbotron show-box" id="show-data-box">
    <div class="title">
        <h2>最近一个月课程发布情况</h2>
    </div>
    <hr class="my-4">
    <div class="content" id="show-data-content" style="width: 100%;height:400px;">

    </div>
</div>
<div class="container border jumbotron show-box" id="input-user-msg">
    <div class="title">
        <h2>用户信息导入</h2>
    </div>
    <hr class="my-4">
    <div class="row" id="input-select-box">
        <div class="col-md-6">
            <a class="btn btn-primary" id="input-once">手动导入单个用户</a>
        </div>
        <div class="col-md-6">
            <a class="btn btn-primary" id="input-batch">批量导入多个用户</a>
        </div>
    </div>
    <div id="back-select-box" style="display: none">
        <p>
            <a id="back-select-btn" href="javascript:;" style="float: right;" >返回导入选项 →</a>
        </p>
    </div>
    <div id="upload-box" style="display: none">
        <div class="form-inline">
            <div class="form-group">
                <label class="sr-only" for="userFile">文件输入</label>
                <input type="file" id="userFile" name="userFile">
            </div>
            <button id="upload-btn" class="btn btn-primary">提交</button>
        </div>
        <div class="progress" id="userFile-icons" style="display: none">
            <div class="progress-bar" role="progressbar" aria-valuenow="60"
                 aria-valuemin="0" aria-valuemax="100" style="width: 40%;">
                <span class="sr-only"><span id="upload-down"></span> 完成</span>
            </div>
        </div>
    </div>
    <div class="row" id="msg-input-box" style="padding-top: 1.2rem; display: none">
        <div class="col-md-4 text-xl-center ">
            <h5><img src="/images/classTime.png" alt=""> 用户姓名</h5>
            <input class="form-control" id="userName" type="text"/>
        </div>
        <div class="col-md-4 text-xl-center ">
            <h5><img src="/images/classTime.png" alt=""> 用户类别</h5>
            <select class="form-control" id="userType">
                <option value="学生">学生</option>
                <option value="教师">教师</option>
                <option value="家长">家长</option>
            </select>
        </div>
        <div class="col-md-4 text-xl-center classTime">
            <h5><img src="/images/classTime.png" alt=""> 用户学号/工号</h5>
            <input class="form-control" id="userNbr" type="text"/>
        </div>
        <div class="col-md-4 text-xl-center classTime">
            <h5><img src="/images/classTime.png" alt=""> 用户性别</h5>
            <input class="form-control" id="userSex" type="text"/>
        </div>
        <div class="col-md-4 text-xl-center classTime">
            <h5><img src="/images/classTime.png" alt=""> 用户电话</h5>
            <input class="form-control" id="userPhone" type="text"/>
        </div>
        <button id="msg-input-btn" class="btn btn-primary">提交</button>
    </div>
</div>
</div>

<script src="/js/jquery-3.1.1.min.js"></script>
<script src="/js/bootstrap/bootstrap-v4.3.1.min.js"></script>
<script src="/js/echarts/echarts.min.js"></script>
<script src="/js/app.js"></script>
<script type="text/javascript">
    var admin = (function () {
        var bindEvents = function () {
            admin.varMatChart();
            admin.varMyPieChart();
            admin.el("#back-select-box").off("click").on("click", function () {
                admin.selectBoxShow();
            });
            admin.el("#upload-btn").off("click").on("click", function () {
                admin.uploadFile();
            });
            admin.el("#input-once").off("click").on("click", function () {
                admin.selectBoxHide();
                admin.magInputBoxShow();
            });
            admin.el("#input-batch").off("click").on("click", function () {
                admin.selectBoxHide();
                admin.uploadBoxShow();
            });
        };
        return {
            data: {},
            el: function (expr) {
                return $(expr ? expr : 'body');
            },
            init: function () {
                bindEvents();
                return;
            },
            show: function () {
                admin.el().show();
                return this;
            },
            hide: function () {
                admin.el().hide();
                return this;
            },
            varMatChart: function () {
                // 基于准备好的dom，初始化echarts实例
                var myChart = echarts.init(document.getElementById('show-data-content'));
                var myChartoption = {
                    title: {
                        text: '发布情况'
                    },
                    tooltip: {
                        trigger: 'axis'
                    },
                    legend: {
                        data: ['语文', '数学', '英语', '物理', '化学']
                    },
                    grid: {
                        left: '3%',
                        right: '4%',
                        bottom: '3%',
                        containLabel: true
                    },
                    toolbox: {
                        feature: {
                            saveAsImage: {}
                        }
                    },
                    xAxis: {
                        type: 'category',
                        boundaryGap: false,
                        data: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
                    },
                    yAxis: {
                        type: 'value'
                    },
                    series: [{
                        name: '语文',
                        type: 'line',
                        stack: '总量',
                        data: [1, 0, 0, 0, 0, 6, 7, 2, 2, 0, 0, 0, 1, 2, 2, 3, 0, 0, 0, 0, 5, 0, 0, 0, 6, 4, 6, 0, 0, 0]
                    },
                        {
                            name: '数学',
                            type: 'line',
                            stack: '总量',
                            data: [2, 2, 2, 0, 0, 0, 0, 3, 4, 0, 0, 0, 0, 0, 3, 0, 0, 3, 0, 0, 0, 6, 0, 0, 0, 6, 0]
                        },
                        {
                            name: '英语',
                            type: 'line',
                            stack: '总量',
                            data: [0, 2, 1, 0, 0, 0, 1, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 4, 5, 5, 0, 6]
                        },
                        {
                            name: '物理',
                            type: 'line',
                            stack: '总量',
                            data: [0, 2, 1, 0, 0, 0, 1, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 4, 5, 5, 0, 6]
                        },
                        {
                            name: '化学',
                            type: 'line',
                            stack: '总量',
                            data: [0, 3, 1, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 2, 0, 0, 3, 1, 1, 0, 1]
                        }
                    ]
                };
                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(myChartoption);
            },
            varMyPieChart: function () {
                var myPieChart = echarts.init(document.getElementById('show-pie-chart'));
                option = {
                    series: [{
                        name: '访问来源',
                        type: 'pie',
                        radius: '55%',
                        // roseType: 'angle',
                        data: [{
                            value: 12,
                            name: '英语'
                        },
                            {
                                value: 8,
                                name: '数学'
                            },
                            {
                                value: 9,
                                name: '物理'
                            },
                            {
                                value: 1,
                                name: '语文'
                            },
                            {
                                value: 3,
                                name: '化学'
                            }
                        ]
                    }]
                };
                myPieChart.setOption(option);
            },
            uploadFile: function () {
                var $file = document.getElementById("#userFile");
                var fileVal = admin.el("#userFile").val();//用户文件内容(文件)
                // 判断文件是否为空
                if (fileVal == "") {
                    App.alert("请选择上传的目标文件! ", "", 3, function () {
                        return;
                    });
                    return;
                }
                //判断文件类型,我这里根据业务需求判断的是Excel文件
                var fileName1 = fileVal.substring(fileVal.lastIndexOf(".") + 1).toLowerCase();
                if (fileName1 != "xls" && fileName1 != "xlsx") {
                    App.alert("请选择Execl文件!", "", 3, function () {
                        return;
                    });
                    return;
                }
                //判断文件大小
                var size1 = $("#userFile")[0].files[0].size;
                if (size1 > 104857600) {
                    alert("上传文件不能大于100M!");
                    return;
                }
                var formData = new FormData();//这里需要实例化一个FormData来进行文件上传
                formData.append("file", $("#userFile")[0].files[0]);
                $.ajax({
                    type: "post",
                    url: "/dtr/user-file/upload",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        if (!App.checker(data)) {
                            return;
                        } else {
                            App.alert("提交成功");
                            return;
                        }
                    }
                });
            },
            selectBoxShow: function () {
                admin.el("#input-select-box").show();
                admin.el("#back-select-box").hide();
                admin.el("#upload-box").hide();
                admin.el("#msg-input-box").hide();
            },
            selectBoxHide: function () {
                admin.el("#input-select-box").hide();
                admin.el("#back-select-box").show();
            },
            uploadBoxShow:function(){
                admin.el("#upload-box").show();
                admin.el("#msg-input-box").hide();
            },
            magInputBoxShow:function () {
                admin.el("#upload-box").hide();
                admin.el("#msg-input-box").show();
            }
        }
    })();
    $(function () {
        admin.init();
    });
</script>
</body>

</html>